<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1424, initial-scale=1.0">
    <title>Grand Guide - WikiForm</title>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <meta name="probely-verification" content="372f9522-3a6a-4fa6-81c1-308d3bdfe130"/>
    <link rel="stylesheet" href="/resources/css/index.css"/>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <div class="logo-container">
                <img src="/resources/assets/gglogo.png" alt="GameZone Logo" class="logo">
            </div>
            <img src="/resources/assets/gyu1.png" alt="gyu" class="gyu">
        </div>
        <div class="right-panel">
            <canvas class="canvas-bg"></canvas>
            <div class="login-box">
                <h2>Fazer Login</h2>
                <div class="button-group">
                    <button class="discord-btn" id="discord-btn">Entrar no Servidor</button>
                    <button class="login-btn" id="login-btn">Entrar com Discord</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.js"></script>
    <script>
        const { createClient } = supabase;
        const supabaseUrl = process.env.SUPABASE_URL;
        const supabaseKey = process.env.SUPABASE_ANON_KEY;
        const supabase = createClient(supabaseUrl, supabaseKey);

        document.getElementById('login-btn').onclick = async () => {
            const { user, session, error } = await supabase.auth.signIn({ provider: 'discord' });
            if (error) {
                alert('Erro ao autenticar com Discord: ' + error.message);
            } else {
                window.location.href = '/protected.html';
            }
        };

        document.getElementById('discord-btn').onclick = () => {
            window.open(`https://discord.com/api/oauth2/authorize?client_id=${process.env.DISCORD_CLIENT_ID}&redirect_uri=${process.env.DISCORD_AUTH_URL}&response_type=code&scope=identify`, '_self');
        };
    </script>
    <script src="app.js"></script>
    <script src="index.js"></script>
</body>
</html>